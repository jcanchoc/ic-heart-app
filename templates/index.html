<!DOCTYPE html>
<html>
  <head>
    <title>Predicci√≥n de Enfermedad Card√≠aca</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <script>
      function toggleHelp() {
        const helpContent = document.querySelector(".help-content");
        helpContent.classList.toggle("visible");
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Formulario de evaluaci√≥n card√≠aca</h1>

      <div class="help-toggle" onclick="toggleHelp()">
        ¬øNecesitas ayuda con los campos?
      </div>

      <div class="help-content">
        <ul>
          <li><strong>Age</strong>: Edad del paciente (en a√±os).</li>
          <li><strong>Sex</strong>: Sexo del paciente.</li>
          <li>
            <strong>ChestPainType</strong>: Tipo de dolor tor√°cico: TA (angina
            t√≠pica), ATA (angina at√≠pica), NAP (dolor no anginoso), ASY
            (asintom√°tico).
          </li>
          <li><strong>Cholesterol</strong>: Nivel de colesterol (en mg/dl).</li>
          <li>
            <strong>FastingBS</strong>: Nivel de glucosa en sangre en ayunas.
          </li>
          <li>
            <strong>MaxHR</strong>: Frecuencia card√≠aca m√°xima alcanzada durante
            el esfuerzo, expresada como un valor num√©rico entero.
          </li>
          <li>
            <strong>ExerciseAngina</strong>: Presencia de angina inducida por el
            ejercicio f√≠sico.
          </li>
          <li>
            <strong>Oldpeak</strong>: Depresi√≥n del segmento ST inducida por el
            esfuerzo f√≠sico.
          </li>
          <li>
            <strong>ST_Slope</strong>: Pendiente del segmento ST durante el pico
            del ejercicio.
          </li>
        </ul>
      </div>

      <form method="post">
        <label>Edad: </label>
        <input type="number" name="Age" required />

        <label>Sexo:</label>
        <select name="Sex">
          <option value="M">Masculino</option>
          <option value="F">Femenino</option>
        </select>

        <label>Tipo de dolor tor√°cico:</label>
        <select name="ChestPainType">
          <option value="TA">Angina t√≠pica</option>
          <option value="ATA">Angina at√≠pica</option>
          <option value="NAP">Dolor no anginoso</option>
          <option value="ASY">Asintom√°tico</option>
        </select>

        <label
          >Colesterol:
          <small class="hint">(125 - 250 mg/dl)</small>
        </label>
        <input type="number" name="Cholesterol" required />

        <label>Glucosa en ayunas > 120 mg/dl:</label>
        <select name="FastingBS">
          <option value="1">S√≠</option>
          <option value="0">No</option>
        </select>

        <label
          >Frecuencia card√≠aca m√°xima:
          <small class="hint">(60 - 202 lpm)</small>
        </label>
        <input type="number" name="MaxHR" required />

        <label>Angina inducida por ejercicio:</label>
        <select name="ExerciseAngina">
          <option value="Y">S√≠</option>
          <option value="N">No</option>
        </select>

        <label
          >Oldpeak:
          <small class="hint">(0.0 - 6.0)</small>
        </label>
        <input type="number" step="any" name="Oldpeak" required />

        <label>Pendiente ST:</label>
        <select name="ST_Slope">
          <option value="Up">Ascendente</option>
          <option value="Flat">Plana</option>
          <option value="Down">Descendente</option>
        </select>

        <input type="submit" value="Predecir" />
      </form>

      {% if prediction is not none %}
      <div
        class="result {% if probability < 30 %}low{% elif probability < 60 %}medium{% else %}high{% endif %}"
      >
        <strong>
          {% if probability < 30 %} ‚úÖ No hay indiciosde enfermedad card√≠aca.{%
          elif probability < 60 %} ‚ö†Ô∏è Riesgo moderado de enfermedad card√≠aca.
          Consulte con su m√©dico para una revisi√≥n preventiva.{% else %} üö®
          Riesgo alto de enfermedad card√≠aca detectado. Es recomendable visitar
          un cardi√≥logo y realizar pruebas diagn√≥sticas.{% endif %}
        </strong>
        <strong>Probabilidad estimada: {{ probability }}%.</strong>
      </div>
      {% endif %}
    </div>
  </body>
</html>
